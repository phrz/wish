<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Wishlist25</title>
		<link rel="stylesheet" href="./style.css" />

		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
			rel="stylesheet"
		/>
		<script src="./script.js"></script>
	</head>
	<body>
		<div class="w-full mx-auto max-w-7xl p-fluid-4">
			<h1 class="text-fluid-6xl font-display leading-none">
				Paul's<br />Wishlist
			</h1>
			<h2 class="text-fluid-base font-semibold uppercase leading-none my-2">
				Winter 25-26
			</h2>
			<section
				id="wishlist"
				class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 mt-20 gap-x-6 gap-y-20"
				x-init="$store.wishlist.data = await (await fetch('./data.json')).json()"
			>
				<template x-for="gift in $store.wishlist.data.gifts" :key="gift.url">
					<a
						:href="gift.url"
						target="_blank"
						x-data="{
							thumbHashSrc: $store.wishlist.decodeThumbHash(gift.thumbHash),
							actualImageSrc: gift.picture,
							preload(url, el) {
								if(el.hasAttribute('data-loaded')) { return }
								const img = new Image();
								img.src = url;
								img.onload = () => {
									el.src = url;
									el.setAttribute('data-loaded', true);
								};
							}
						}"
					>
						<article class="gift-card flex flex-col group gap-2">
							<div class="z-stack mb-2">
								<img
									:src="thumbHashSrc"
									@load="preload(actualImageSrc, $el);"
									:alt="'Photograph of ' + gift.name"
									class="w-full bg-slate-200 group-hover:bg-slate-300 aspect-square object-contain rounded transition-colors"
								/>
								<div
									class="gift-price text-xl font-light self-end place-self-end m-3 px-2 bg-white rounded-full"
									x-text="gift.price"
								></div>
							</div>
							<h2
								class="gift-name font-semibold text-fluid-xl leading-none px-1"
								x-text="gift.name"
							></h2>
							<div
								class="gift-detail font-medium uppercase px-1"
								x-text="gift.detail"
							></div>

							<div
								class="gift-vendor uppercase text-sm font-medium px-1"
								x-text="gift.vendor + ' â†—'"
							></div>
						</article>
					</a>
				</template>
			</section>
		</div>
	</body>
</html>
